function [PopObj,PopDec,P] =  funfun()

global M D lower upper encoding N PopCon cons cons_flag name

    %% Initialization
    D = M + 4;
    lower    = zeros(1,D);
    upper    = ones(1,D);
    encoding = 'real';
    switch encoding
        case 'binary'
            PopDec = randi([0,1],N,D);
        case 'permutation'
            [~,PopDec] = sort(rand(N,D),2);
        otherwise
            PopDec = unifrnd(repmat(lower,N,1),repmat(upper,N,1));
    end
    % N=4,M=3
   
%     PopDec=[0.915192859,0.028727049,0.607623827,0.479063179,0.206890535,0.3339074,0.625488188;
%              0.614069404,0.702568007,0.634910672,0.789036154,0.40688523,0.232214776,0.060136365;
%               0.556674654,0.088459678,0.780410954,0.457283871,0.021801791,0.263091797,0.241113907]
%    
% N=10,M=8
    PopDec=[0.536670256,0.964008663,0.328074671,0.795736011,0.611979939,0.416348378,0.721122666,0.591319176,0.148780267,0.470257077,0.33385828,0.357379456;
0.330122966,0.467156812,0.464288412,0.594115071,0.971130391,0.04400558,0.295053079,0.731548924,0.892694749,0.844722789,0.820193364,0.721198203;
0.50930279,0.574945265,0.839338753,0.336512317,0.571693052,0.724383644,0.397724115,0.474396526,0.677331281,0.742628266,0.241313572,0.362475023;
0.990179757,0.101665098,0.095609143,0.991536875,0.938234005,0.943046877,0.847108978,0.599045578,0.851177758,0.238282134,0.573930608,0.120977838;
0.728028879,0.502546086,0.853794269,0.201726141,0.923346543,0.252173433,0.76302695,0.208720562,0.910886964,0.568307209,0.151518037,0.352788854;
0.631061767,0.495882541,0.843099449,0.073345594,0.199840554,0.299829067,0.099449554,0.312643064,0.259084465,0.973921013,0.477105295,0.124218861;
0.471947378,0.295603416,0.507458351,0.737000875,0.633039016,0.653803646,0.508372405,0.564803018,0.33925357,0.443474945,0.302883491,0.339089051;
0.166939806,0.782189015,0.667332862,0.546467366,0.969729699,0.763327228,0.339952496,0.918921422,0.809726944,0.452821296,0.058341928,0.297880213];

    cons = zeros(size(PopDec,1),1);
    cons_flag = 1;
    PopCon = cons;
    %% Calculate objective values
    switch name
        case 'DTLZ1'
            g      = 100*(D-M+1+sum((PopDec(:,M:end)-0.5).^2-cos(20.*pi.*(PopDec(:,M:end)-0.5)),2));
            PopObj = 0.5*repmat(1+g,1,M).*fliplr(cumprod([ones(N,1),PopDec(:,1:M-1)],2)).*[ones(N,1),1-PopDec(:,M-1:-1:1)];
            P = UniformPoint(N,M)/2;
        case 'DTLZ2'
            g      = sum((PopDec(:,M:end)-0.5).^2,2);
            PopObj = repmat(1+g,1,M).*fliplr(cumprod([ones(size(g,1),1),cos(PopDec(:,1:M-1)*pi/2)],2)).*[ones(size(g,1),1),sin(PopDec(:,M-1:-1:1)*pi/2)];
            P = UniformPoint(N,M);
            P = P./repmat(sqrt(sum(P.^2,2)),1,M);
        case 'DTLZ3'
            g      = 100*(D-M+1+sum((PopDec(:,M:end)-0.5).^2-cos(20.*pi.*(PopDec(:,M:end)-0.5)),2));
            PopObj = repmat(1+g,1,M).*fliplr(cumprod([ones(N,1),cos(PopDec(:,1:M-1)*pi/2)],2)).*[ones(N,1),sin(PopDec(:,M-1:-1:1)*pi/2)];
            P = UniformPoint(N,M);
            P = P./repmat(sqrt(sum(P.^2,2)),1,M);
    end
   %% Sample reference points on Pareto front
    %P = UniformPoint(N,obj.Global.M)/2;
end